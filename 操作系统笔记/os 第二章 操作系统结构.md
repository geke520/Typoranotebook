### 第二章  操作系统结构
#### 计算机体系结构——冯•诺伊曼结构

* 计算机体系结构就是指适当地组织在一起的一系列系统元素的集合，这些系统元素互相配合、相互协作，通过对信息的处理而完成预先定义的目标。通常包含的系统元素有：计算机软件、计算机硬件、人员、数据库、文档和过程。

#### 操作系统组织结构——层次结构、微内核结构

   a. 层次结构
   * 将单一体OS的功能分成不同层次，底层次的功能为其紧邻其上的一个层次的功能提供服务
   * THE系统是此模型的第一个OS

   b.微内核结构
   * 为了实现高可靠性，将操作系统划分成小的、良好定义的模块，只有其中一个核心模块——微内核——运行在内核态，其他模块则作为普通用户进程运行
   *  设备驱动和文件系统作为普通用户进程，模块中的错误会使模块崩溃，但不会使整个系统死机
#### 基本概念区别

   * 中断和陷入
|中断|陷入|异常|
|:-:|:-:|:-:|
|为了设备与CPU之间的通信。典型的有如服务请求，任务完成提醒等|内中断主要指在处理机和内存内部产生的中断，也称陷入，如校验错、页面失效、溢出、除数为零等|异常是由当前正在执行的进程产生。异常包括很多方面，有出错（fault），有陷入（trap），也有可编程异常（programmable exception）|
   1. 陷入通常由处理机正在执行的现行指令引起，而中断则是由与现行指令无关的中断源引起的。
   2. 陷阱处理程序提供的服务为当前进程所用，而中断处理程序提供的服务则不是为了当前进程的。
   3. CPU在执行完一条指令之后，下一条指令开始之前响应中断，而在一条指令执行中也可以响应陷阱。

   * 特权指令和非特权指令
   
     |       特权指令       |                     非特权指令                     |
     | :------------------: | :------------------------------------------------: |
     | 特权指令在核心态调用 | 非特权指令在程序执行时（用户态和核心态）都可以调用 |
   
   * 用户态和系统态
   
     |                           特权指令                           |                          非特权指令                          |
     | :----------------------------------------------------------: | :----------------------------------------------------------: |
     | 用户执行状态简称用户态；进程的用户程序段在执行时，该进程处于用户态 | 系统执行状态简称系统态或核心态；一个进程的系统程序段在执行时，该进程处于系统态 |
   
   * 系统调用
     系统调用（System Call）提供了操作系统提供的有效服务接口
#### 虚拟机概念
   虚拟机（Virtual Machine）的基本思想：单个计算机（CPU、内存、磁盘、网卡等）的硬件抽象为几个不同的执行部件，从而造成一种“幻觉”，仿佛每个独立的执行环境都在自己的计算机上运行一样